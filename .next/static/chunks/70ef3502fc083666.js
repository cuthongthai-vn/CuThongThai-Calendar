(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},77844,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566);function l({isOpen:e,onClose:r,onSuccess:l}){let[s,n]=(0,a.useState)({indicator_key:"USDVND_BLACK_MARKET",date:new Date().toISOString().split("T")[0],value:""}),[o,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)("");if(!e)return null;let u=async e=>{e.preventDefault(),i(!0),d("");try{let e=await fetch("/api/macro/manual-entry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();e.ok?(d("âœ… Cáº­p nháº­t thÃ nh cÃ´ng!"),l&&l(),setTimeout(()=>{d(""),r()},1500)):d(`âŒ Lá»—i: ${t.error}`)}catch(e){d("âŒ Lá»—i káº¿t ná»‘i")}finally{i(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-md p-6 shadow-2xl relative",children:[(0,t.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-slate-500 hover:text-white",children:"âœ•"}),(0,t.jsxs)("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"bg-amber-500 w-2 h-6 rounded-full"}),"Cáº­p Nháº­t Sá»‘ Liá»‡u"]}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-semibold text-slate-400 mb-1 uppercase",children:"Chá»‰ Sá»‘"}),(0,t.jsxs)("select",{className:"w-full bg-slate-950 border border-slate-700 rounded px-3 py-2 text-white focus:border-amber-500 outline-none",value:s.indicator_key,onChange:e=>n({...s,indicator_key:e.target.value}),children:[(0,t.jsx)("option",{value:"USDVND_BLACK_MARKET",children:"USD Chá»£ Äen (BÃ¡n)"}),(0,t.jsx)("option",{value:"USDVND_OFFICIAL",children:"USD NgÃ¢n HÃ ng"}),(0,t.jsx)("option",{value:"VN_GDP_YOY",children:"GDP Growth (YoY)"}),(0,t.jsx)("option",{value:"VN_CPI_YOY",children:"CPI Inflation (YoY)"}),(0,t.jsx)("option",{value:"VN_INTEREST_RATE",children:"LÃ£i Suáº¥t Äiá»u HÃ nh"}),(0,t.jsx)("option",{value:"VN_SAVINGS_RATE_12M",children:"LÃ£i Suáº¥t Tiáº¿t Kiá»‡m (12T)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-semibold text-slate-400 mb-1 uppercase",children:"NgÃ y"}),(0,t.jsx)("input",{type:"date",required:!0,className:"w-full bg-slate-950 border border-slate-700 rounded px-3 py-2 text-white focus:border-amber-500 outline-none",value:s.date,onChange:e=>n({...s,date:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-semibold text-slate-400 mb-1 uppercase",children:"GiÃ¡ Trá»‹"}),(0,t.jsx)("input",{type:"number",step:"any",required:!0,placeholder:"VD: 25400 hoáº·c 6.5",className:"w-full bg-slate-950 border border-slate-700 rounded px-3 py-2 text-white font-mono text-lg focus:border-amber-500 outline-none",value:s.value,onChange:e=>n({...s,value:e.target.value})})]}),c&&(0,t.jsx)("div",{className:`text-sm text-center font-bold ${c.includes("âœ…")?"text-green-500":"text-red-500"}`,children:c}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-amber-500 hover:bg-amber-600 text-black font-bold py-3 rounded-lg transition-all disabled:opacity-50 mt-4",children:o?"Äang LÆ°u...":"LÆ°u Dá»¯ Liá»‡u"})]})]})})}function s(){let[e,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1),b=(0,r.useRouter)(),[g,v]=(0,a.useState)({event_name:"",event_time:"",currency:"USD",forecast:"",actual:"",previous:"",impact_level:"High"}),[y,j]=(0,a.useState)(null),f=async()=>{u(!0);try{let e=await fetch("/api/events");if(e.ok){let t=await e.json();c(t)}}catch(e){console.error("Failed to fetch events:",e)}finally{u(!1)}};(0,a.useEffect)(()=>{e&&f()},[e]);let N=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},w=()=>{v({event_name:"",event_time:"",currency:"USD",forecast:"",actual:"",previous:"",impact_level:"High"}),j(null)},S=async e=>{e.preventDefault();let t={...g,event_time:new Date(g.event_time).toISOString()},a=y?`/api/events/${y}`:"/api/events";try{let e=await fetch(a,{method:y?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok)w(),f();else{let t=await e.json();alert(`Error: ${t.error}`)}}catch(e){console.error(e),alert("Failed to save event")}},_=async e=>{if(confirm("Are you sure you want to delete this event?"))try{await fetch(`/api/events/${e}`,{method:"DELETE"}),f()}catch(e){console.error(e)}},k=async e=>{m(e);try{let t=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:e})}),a=await t.json();t.ok?(alert("AI Analysis Updated!\n"+a.ai_sentiment),f()):alert("AI Error: "+(a.error||JSON.stringify(a)))}catch(e){alert("Network Error")}finally{m(null)}};return e?(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-theme-yellow",children:"Admin Dashboard"}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded flex items-center gap-2",children:"ðŸ“Š Manage Macro Data"})]}),(0,t.jsx)(l,{isOpen:x,onClose:()=>p(!1),onSuccess:()=>{alert("Macro Data Updated"),b.refresh()}}),(0,t.jsxs)("div",{className:"bg-gray-900 p-6 rounded border border-gray-700 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:y?"Edit Event":"Add New Event"}),(0,t.jsxs)("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)("input",{name:"event_name",value:g.event_name,onChange:N,placeholder:"Event Name",className:"p-2 rounded bg-black border border-gray-600 text-white",required:!0}),(0,t.jsx)("input",{name:"currency",value:g.currency,onChange:N,placeholder:"Currency",className:"p-2 rounded bg-black border border-gray-600 text-white",required:!0}),(0,t.jsx)("input",{name:"event_time",type:"datetime-local",value:g.event_time,onChange:N,className:"p-2 rounded bg-black border border-gray-600 text-white",required:!0}),(0,t.jsxs)("select",{name:"impact_level",value:g.impact_level,onChange:N,className:"p-2 rounded bg-black border border-gray-600 text-white",children:[(0,t.jsx)("option",{value:"High",children:"High"}),(0,t.jsx)("option",{value:"Medium",children:"Medium"}),(0,t.jsx)("option",{value:"Low",children:"Low"})]}),(0,t.jsx)("input",{name:"previous",value:g.previous,onChange:N,placeholder:"Previous (e.g. 100K)",className:"p-2 rounded bg-black border border-gray-600 text-white"}),(0,t.jsx)("input",{name:"forecast",value:g.forecast,onChange:N,placeholder:"Forecast (e.g. 105K)",className:"p-2 rounded bg-black border border-gray-600 text-white"}),(0,t.jsx)("input",{name:"actual",value:g.actual,onChange:N,placeholder:"Actual (e.g. 110K)",className:"p-2 rounded bg-black border border-gray-600 text-white"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 bg-theme-yellow text-black font-bold py-2 rounded",children:y?"Update":"Add"}),y&&(0,t.jsx)("button",{type:"button",onClick:w,className:"bg-gray-600 text-white font-bold py-2 px-4 rounded",children:"Cancel"})]})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-800 text-gray-400 border-b border-gray-700",children:[(0,t.jsx)("th",{className:"p-3",children:"Time"}),(0,t.jsx)("th",{className:"p-3",children:"Event"}),(0,t.jsx)("th",{className:"p-3",children:"Prev / Fcst / Act"}),(0,t.jsx)("th",{className:"p-3",children:"Impact"}),(0,t.jsx)("th",{className:"p-3",children:"AI Sentiment"}),(0,t.jsx)("th",{className:"p-3",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:i.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-900",children:[(0,t.jsx)("td",{className:"p-3 text-sm",children:new Date(e.event_time).toLocaleString()}),(0,t.jsxs)("td",{className:"p-3 font-semibold",children:[e.event_name," ",(0,t.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",e.currency,")"]})]}),(0,t.jsxs)("td",{className:"p-3 font-mono text-sm text-gray-300",children:[e.previous," / ",e.forecast," / ",(0,t.jsx)("span",{className:e.actual?"text-white font-bold":"text-gray-600",children:e.actual||"-"})]}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"High"===e.impact_level?"bg-red-900 text-red-200":"bg-gray-700 text-gray-300"}`,children:e.impact_level})}),(0,t.jsxs)("td",{className:"p-3",children:["BULLISH"===e.ai_sentiment&&(0,t.jsx)("span",{className:"text-green-500 font-bold",children:"BULLISH"}),"BEARISH"===e.ai_sentiment&&(0,t.jsx)("span",{className:"text-red-500 font-bold",children:"BEARISH"}),"NEUTRAL"===e.ai_sentiment&&(0,t.jsx)("span",{className:"text-gray-500",children:"NEUTRAL"})]}),(0,t.jsxs)("td",{className:"p-3 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{let t,a;return j(e.id),a=new Date((t=new Date(e.event_time)).getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16),void v({event_name:e.event_name,event_time:a,currency:e.currency,forecast:e.forecast||"",actual:e.actual||"",previous:e.previous||"",impact_level:e.impact_level||"High"})},className:"text-blue-400 hover:text-blue-300",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>_(e.id),className:"text-red-400 hover:text-red-300",children:"Del"}),(0,t.jsx)("button",{onClick:()=>k(e.id),disabled:h===e.id,className:`px-3 py-1 bg-purple-900 text-purple-200 rounded hover:bg-purple-800 ${h===e.id?"opacity-50":""}`,children:h===e.id?"Thinking...":"Run AI"})]})]},e.id))})]})})]}):(0,t.jsx)("div",{className:"flex justify-center items-center h-screen bg-black text-white",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"9999"===n?s(!0):alert("Wrong PIN!")},className:"bg-gray-900 p-8 rounded border border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl mb-4 font-bold text-theme-yellow",children:"Admin Access"}),(0,t.jsx)("input",{type:"password",value:n,onChange:e=>o(e.target.value),placeholder:"Enter PIN",className:"p-2 rounded bg-black border border-gray-600 w-full mb-4 text-white",autoFocus:!0}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-theme-yellow text-black font-bold py-2 rounded",children:"Login"})]})})}e.s(["default",()=>s],77844)}]);